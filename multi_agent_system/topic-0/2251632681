In this paper, we study a distributed optimization problem using a subgradient projection algorithm for multi-agent systems subject to nonidentical constraints and communication delays under local communication. Here the agents capable of communicating with their local neighbors are constrained to remain in possibly different closed convex sets and optimize a global objective function composed of a sum of local objective functions, each of which is known to only one agent. First, we consider the case of fixed graphs and show that distributed optimization might not be achieved on general strongly connected directed graphs. Instead, the agents optimize a weighted sum of the local objective functions. Then we consider the case of switching graphs and show that distributed optimization can be achieved when the adjacency matrices are doubly stochastic and the union of the directed graphs is strongly connected among each time interval of a certain bounded length. Furthermore, we consider the case of communication delays, where the delays are mutually independent. It is shown that the distributed optimization problem can be solved by introducing additional delays to the subgradient projection algorithm and the communication delays can be arbitrarily bounded. Finally, numerical examples are included to show the obtained theoretical results.